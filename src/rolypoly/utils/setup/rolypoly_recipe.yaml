{% set name = "rolypoly-bio" %}
{% set version = "0.3.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/{{ name[0] }}/{{ name }}/rolypoly_bio-{{ version }}.tar.gz
  sha256: 5c205b0ce972960a92b785f7fd79393ee114eacf763b5e47db38b75ff04623c3

build:
  entry_points:
    - rolypoly = rolypoly.rolypoly:rolypoly
  noarch: python
  script: {{ PYTHON }} -m pip install . -vvv
  number: 0

channels:
  - conda-forge
  - bioconda
  - defaults

requirements:
  host:
    - python >=3.9
    - hatchling
    - pip
  run:
    - python >=3.9
    - aragorn >=1.2.41,<2
    - bowtie >=1.3.0,<2
    - diamond >=2.1.10,<3
    - linearfold >=1.0.1.dev20220829,<2
    - megahit >=1.2.9,<2
    - mmseqs2 >=16.747c6,<18
    - ncbi-datasets-cli >=17.3.0,<18
    - pigz >=2.8,<3
    - plass >=5.cf8933,<6
    - seqkit >=2.10.0,<3
    - spades >=4.0.1,<5
    - trnascan-se >=2.0.12,<3
    - falco >=1.2.5,<2

test:
  imports:
    - rolypoly_bio
  commands:
    - pip check
    - rolypoly --help
  requires:
    - pip

about:
  summary: RNA virus analysis toolkit
  dev_url: https://code.jgi.doe.gov/UNeri/rolypoly
  license: GPL-3.0-only
  license_file: LICENSE

extra:
  recipe-maintainers:
    - UriNeri
    - Antonio
